<!-- header -->
<p>This page introduces the workflow of gregorio with TeXworks. It supposes you already have <a href="installation-texworks.html">configured TeXworks</a>.</p>
<p>Overall, producing a score involves these steps:</p>
<ul>
<li>writing a gabc text file that describes the score</li>
<li>compiling a LaTeX file including your score</li>
</ul>

<h3 id="gabc">Creating a gabc file</h3>

<p>For a first example, you can inspire from the score <code>PopulusSion.gabc</code> in the <code>examples/</code> directory of gregorio or <a href="https://github.com/gregorio-project/gregorio/blob/master/examples/PopulusSion.gabc">here</a>. You need to save it with the extension ".gabc". Under Windows, this extension should appear automatically, otherwise you need to choose "All files".</p>
<p>Then you need to type the description of the score in gabc. For more details, refer to the <a href="/gabc/index.html">gabc page</a>. For the rest of the introduction, let's suppose you keep this score as it is and that you save it as <code>example.gabc</code>.</p>

<h3>Compiling the main TeX file</h3>

<p>The last step is to compile the TeX file to get a PDF file. We'll use LuaLaTeX through TeXworks for this.</p>
<p>Here are some explanations on this subtle part of the process: the TeX file produced by gregorio represents only the score, but it does not constitute an entire document. To typeset the score correctly, we need a main LaTeX file that will call our TeX file and set some typesetting rules (margins, title, style, fonts, etc.).</p>
<p>For this you will certainly need some notions of LaTeX. But for a first try, you can use the following barebones file:
<div class="commandline">
<code>\documentclass[11pt]{article}<br />
<br />
\usepackage{fontspec}<br />
<br />
\usepackage{gregoriotex}<br />
<br />
\begin{document}<br />
<br />
\includescore[a]{example}<br />
<br />
\end{document}</code>
</div>
<p>Copy the above into a new file and save it as <code>test.tex</code> in the same directory as <code>example.gabc</code>.</p>
<p>The goal now is to compile this file to get the final PDF. To do that, and only that, you would use the LuaLaTeX engine that I mentioned above. If you want to go that route, then select LuaLaTeX from the drop down list in the upper left or place the following line at the begining of the file:</p>
<div class="commandline">
<code>% !TEX TS-program = LuaLaTeX</code>
</div>
<p>Then click on the "Typeset" button (or use the keyboard short cut).</p>
<p>If you correctly followed the instructions of this page, a PDF file will show up in the right part of your screen! You're now ready to start playing with <a href="/gregoriotex/details.html">the various commands available to tweak the appearence of the score.</a></p>

<h3 id="automation">Compiling the score directly</h3>

<p>In order to be able to compile the document directly from the gabc file window, open <code>example.gabc</code> and place the following lines at the begining of your gabc file:</p>
<div class="commandline">
<code>% !TEX root = test.tex</code><br />
<code>% !TEX TS-program = LuaLaTeX</code>
</div>
<p>The first line tells TeXworks that this file is part of a larger project whose main (or root) file is <code>test.tex</code>. Now whenever you go to typeset <code>example.gabc</code> TeXworks wil typeset <code>test.tex</code> instead. The second line tells TeXworks which engine should be the defualt selection in the drop down list. It is essential that this match the desired engine for the root project file, not the file currently being editted. This is because TeXworks does not look for the preferred engine of the root file, but simply typesets it using the currently selected engine.</p>

<!-- footer -->
