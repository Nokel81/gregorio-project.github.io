<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!--
  Gregorio web site.
  Copyright (C) 2007-2015 The Gregorio project

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->
  <title>Gregorio project website</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="description" content="Free software for typesetting Gregorian chant" lang="en">
  <meta name="keywords" content="Gregorian chant, gregorio, gabc, gregoriotex" lang="en">
  <meta name="author" content="The Gregorio project">
  <link rel="shortcut icon" href="/illus/fav.ico">
  <link rel="icon" href="/illus/fav.ico">
  <link rel="stylesheet" href="/style.css" type="text/css" title="default">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script>
    var context = 'gregorio';
    var title = 'Gregorio project website'
  </script>
</head>

<body>
  <div id="ban">
    <img src="/illus/harpedroite.png" title="" class="hd" alt="" />
    <a id="haut" name="haut"></a>
    <div id="banniere">
    </div>
  </div>
  <div class="menu">
    <ul class="menuitem">
      <li><a href="/">Gregorio</a>
        <ul class="level2" id="menu-gregorio">
          <li><a href="/gregorio-history.html">About</a> </li>
          <li><a href="https://github.com/gregorio-project/gregorio/releases">Download</a> </li>
          <li><a href="/installation.html">Installation</a> </li>
          <li><a href="/tutorial/tutorial-gabc-01.html">Tutorial</a></li>
          <li><a href="/introduction-editor.html">Using Gregorio</a></li>
          <li><a href="/legalissues.html">Legal issues</a></li>
        </ul>
      </li>
      <li><a href="/gregoriotex/index.html">GregorioTeX</a>
        <ul class="level2" id="menu-gregoriotex">
          <li><a href="/gregoriotex/tex.html">TeX?</a></li>
          <li><a href="/gregoriotex/details.html">Detailed description</a></li>
          <li><a href="/gregoriotex/examples.html">Examples</a></li>
          <li><a href="/gregoriotex/features.html">Bonus features</a></li>
        </ul>
      </li>
      <li><a href="/gabc/index.html">gabc</a>
        <ul class="level2" id="menu-gabc">
          <li><a href="/gabc/index.html">Basics</a></li>
          <li><a href="/gabc/details.html">Details</a></li>
        </ul>
      </li>
      <li><a href="/structure.html">Gregorian notation</a>
        <ul class="level2" id="menu-notation">
          <li><a href="/structure.html">Structure</a></li>
          <li><a href="/graphy.html">Alignment</a></li>
        </ul>
      </li>
      <li><a href="/contact.html">Contact</a>
      </li>
      <li><a href="/links.html">Links</a>
      </li>
    </ul>
  </div>
  <div class="flux">
    &nbsp;
    <!-- IE patch-->
    <div class="text">
      <!-- End of header -->
<!-- header -->

<h1>Using Gregorio in TeXShop</h1>

<p>This page describes the way to use Gregorio with a TeX editor, such as TeXworks or TeXShop. It supposes that your editor is already correctly configured. See configuration page for <a href="configuration-texworks.html">TeXworks</a> or <a href="configuration-texshop">TeXshop</a>. These instructions can be easily adapted for other tools using TeXShop markup, such as <a href="https://github.com/SublimeText/LaTeXTools">LaTeX-tools for SublimeText</a>. If you are used to TeX compilation and know the command line tools, please refer to the <a href="introduction-commandline.html">command line introduction</a>.</p>

<p>Overall, producing a score involves these steps:</p>

<ul>
<li>writing a gabc text file that describes the score</li>
<li>compiling the GregorioTeX code thus produced, with LaTeX</li>
</ul>

<h3 id="gabc">Creating a gabc file</h3>

<p>For a first example, you can inspire from the score <code>PopulusSion.gabc</code> in the <code>examples/</code> directory of gregorio or <a href="https://github.com/gregorio-project/gregorio/blob/master/examples/PopulusSion.gabc">here</a>.  Save your file in a directory that will be our working directory. You need to save it with the extension ".gabc", in UTF-8 encoding (under TeXShop, save in "UTF8 Plain Text" format). See the <a href="/gabc/index.html">gabc page</a> for details about the gabc syntax let's suppose you keep this score as it is and that you save it as <code>example.gabc</code>.</p>

<h3>Making a document and including your score</h3>

<p>This step will make you create a small document and include your score in it. It will be very basic, but you'll be able to do virtually anything with this base: a booklet, a book, including more scores, etc.</p>

<p>For this you will certainly need some notions of LaTeX. But for a first try, you can use the following barebones file:</p>

<div class="commandline">
<code>\documentclass[11pt]{article}<br />
<br />
\usepackage{fontspec}<br />
<br />
\usepackage{gregoriotex}<br />
<br />
\begin{document}<br />
<br />
\includescore{example}<br />
<br />
\end{document}</code>
</div>

<p>Copy the above into a new file and save it as <code>test.tex</code> in the same directory as <code>example.gabc</code></p>

<p>The goal now is to compile this file to get the final PDF.  Select LuaLaTeX+se from the drop down list in the upper left, or automate this selection by placing the following line at the begining of the file:</p> 

<div class="commandline">
<code>% !TEX TS-program = LuaLaTeX+se</code>
</div>

<p>Then click on the "Typeset" button.</p>

<p>If you correctly followed the instructions of this page, a PDF file will show up in the right part of your screen!  You're now ready to start playing with <a href="/gregoriotex/details.html">the various commands available to tweak the appearence of the score.</a></p>

<h3>Behind the scenes</h3>

<p>What you just did might seem a bit magical and confusing. Here is what really happened:</p>

<ul>
  <li>Your editor launches the command <code>lualatex --shell-escape test.tex</code></li>
  <li>LuaLaTeX compiles the document, when it sees <code>\includescore{example}</code>, it launches the command <code>gregorio example.gabc</code></li>
  <li>Gregorio compiles your gabc score into <code>example-foo.gtex</code> (where <code>foo</code> is the version of gregorio), you can check your folder for this file</li>
  <li>Once it is compiled, LuaLaTeX includes <code>example-foo.gtex</code> and continues the compilation of your document.
</ul>

<p>There is a mechanism to avoid compilation if the gabc file and gregorio version did not change.</p>

<h3 id="automation">Compiling from the score document</h3>

<p>It can be practical, when writing a gabc score, to compile directly from the windows of the gabc file. To allow that, add the following lines at the top of your gabc file:</p>

<div class="commandline">
<code>% !TEX root = test.tex</code><br />
<code>% !TEX TS-program = LuaLaTeX+se</code>
</div>

<p>The first line tells TeXShop that this file is part of a larger project whose main (or root) file is <code>test.tex</code>.  Now whenever you go to typeset <code>example.gabc</code> TeXShop wil typeset <code>test.tex</code> instead.  The second line is the same as in your tex file (it is mandatory under TeXworks, optional in TeXShop).</p>

<!-- footer -->
    </div>
    <div class="bottom">
    </div>
    <script>
      document.title = $('h1:first').html();
      $.each(['gregorio', 'gregoriotex', 'gabc', 'notation'], function(i, menu) {
        if (context != menu) {
          $('#menu-'+menu).hide();
        }
      });
    </script>
  </body>
</html>
