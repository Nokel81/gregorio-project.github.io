<!--#set var="context" value="default" --><!--#set var="title" value="Configuring Gregorio with TeXworks on Windows" --><!--#include virtual="/gregorio/header.en.html" -->

<h1><!--#echo var="title" --></h1>

<div>
<p>This page describes how to manually configure TeXworks to work with gregorio on a Windows PC.  You will have to repeat this process for each user who uses TeXworks.  If you used the Windows installer or above and are the administrator that installed gregorio, then all of this should have been done for you.</p>

<h3>Configure TeXworks</h3>

<p><b>Note:</b> These instructions are for versions of Gregorio prior to 2.4.2.  For more recent versions see <a href="gregorio/introduction-texworks-universal">TeXworks configuration page</a>.

<p>There are three compilation engines for use with TeXworks:
    <dl>
    <dt>gregorio.bat:</dt> <dd>This engine takes a gabc score runs gregorio on it, converting it to a gtex file.</dd>
    <dt>greg-book.bat:</dt> <dd>This engine typesets a document which includes one or more scores via the \includescore command (more on that later).  It automatically checks to see if the scores have changed since the document was last typeset and runs gregorio on them as needed.</dd>
    <dt>greg-lily-book:</dt> <dd>Unfortunately there is a bug in lilypond-book (upon which this engine depends) that prevents it from working on Windows.  As a result Windows users are out of luck here.  Should the bug in lilypond-book ever be resolved then work on this engine will continue.</dd>
    </dl>
    All of these engines can be found in <code>/contrib/TeXworks/Windows</code> in the latest source download (see the <a href="/gregorio/installation-windows-advanced">Advanced Windows Installation page</a> for instructions on how to get the source).

<p>To add the compilation engines to TeXworks, go into <code>TeXworks -&gt; Preferences</code>) and then to the "Typesetting" tab, in the "Processing tools" section, click on add ("<code>+</code>"), and enter the following data:</p>

<div class="legende">
<img src="/gregorio/illus/texworks-gregorio-win.png" title="" alt="" />
<br />Adding gregorio in TeXworks
</div>

<p>You can also use the "Browse" button to select the engine (especially useful if gregorio wasn't instaled to "Program Files").  Make sure that you uncheck the "View PDF after running" box in the lower left as this engine doesn't produce a pdf.  Once you're done click OK to add the engine.</p>

<p>Repeat the same process for greg-book, this time leaving the "View PDF after running" box checked.</p>

<div class="legende">
<img src="/gregorio/illus/texworks-greg-book-win.png" title="" alt="" />
<br />Adding greg-book in TeXworks
</div>

<p>If everything goes as planned, then you're ready to <a href="/gregorio/introduction-texworks.en.html">start working with TeXworks</a>.  If not, see below.</p>

<div visibility: hidden>
<h3 id="lily">LilyPond-Book and greg-lily-book</h3>

<p>Because greg-lily-book is dependent on the <a href="https://sole.dimi.uniud.it/~nicola.vitacolonna/software/lilypond-texshop/">LilyPond-Book engine by Nicola Vitacolonna</a> it is necessary to first get that engine working on Windows.  However, Windows lacks several of the dependencies that this engine has so getting things setup is a bit more complicated than setting up the other two engines above.</p>

<p>The LilyPond-Book engine is written in PERL, so naturally you'd expect that an installation of PERL was the first thing you needed.  However, TeXLive installs its own version of PERL and will use this version, even if you have a full install of PERL elsewhere on your system.  Further, TeXLive's version of PERL is missing a module that LilyPond-Book needs to run.  Therefore, the first step is actually to add that module to TeXLive's PERL.  You must be logged in as an Administrator for this to work.<p>

<p>To add modules to PERL you need two tools installed on your system: make and a C compiler.  If you have these already, then you can skip this step.  If not then you can <a href="http://gnuwin32.sourceforge.net/packages/make.htm">get a Windows version of make here</a> and <a href="http://sourceforge.net/projects/mingw/files/Installer/">a Windows version of gcc here</a> (gcc stands for "GNU compiler collection and includes a C compiler in the bundle).  Both of these are free, open-source tools and come with Windows Installers (making your life a whole lot easier).</p>

<p>Once you have these tools installed, open a terminal window (sorry, there is no other way to do this).  If you've never used one before, this is your old-fashioned DOS prompt.  It allows you to issue command directly to the system without going through the graphical interface.  You can find it under <code>Start -&gt; Accessories -&gt; Command Prompt</code>.  At the prompt issue the following commands:</p>

<div class="commandline">
<code>cd c:\texlive\2013\tlpkg\tlperl\bin\</code><br />
<code>perl -MCPAN -e "install File::Copy::Recursive"</code><br />
</div>

<p>That's it.  Assuming you didn't get any errors, your TeXLive PERL is now ready to run the LilyPond-Book engine, and therefore greg-lily-book.  To configure TeXworks, follow the same procedure outlined above for greg-book (except select greg-lily-book.bat instead).</p>

<p><b>Note:</b> Because Windows recognizes executables by extension, you cannot select LilyPond-Book.engine directly when configuring TeXworks.  Since greg-lily-book.bat is a batch file, it is executable and thus usable.  If you want equivalent functionality for LilyPond-Book by itself, then you'll need to wrap the call of LilyPond-Book.engine in a batch file.  This can be done by creating a modified copy of greg-lily-book.bat.  Simply remove all the code between the indicated marks.</p>

</div>

<h3 id="Troubleshooting">Troubleshooting</h3>

<p>While the Windows installer should take care of configuring TeXworks for you, you must have administrator privlages to run it (it is, afterall, an installer).  For non-administrator users you will need to use the above described manual configuration procedure.  Even if gregorio is already installed, you can still use the installer to setup TeXworks (the installer will simply overwrite the previously installed identical files).</p>

<p>If you're having other issues with getting the engines setup on Windows, if you're having trouble, then sign up for the users mailing list (<a href="/gregorio/contact">instructions are here</a>) and send an email describing your problem in as much detail as possible.  Someone will help you get your issue resolved.</p>

</div>
<!--#include virtual="/gregorio/footer.en.html" -->
